{%- comment -%}
Enhanced SEO snippet for Loopzo theme
{%- endcomment -%}

{%- if template == 'product' -%}
  {%- assign product_image = product.featured_image | image_url: width: 1200 -%}
  <meta property="og:image" content="{{ product_image }}">
  <meta property="og:image:secure_url" content="{{ product_image }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="product">
  <meta property="og:price:amount" content="{{ product.price | money_without_currency }}">
  <meta property="og:price:currency" content="{{ shop.currency }}">

  {%- if product.compare_at_price > product.price -%}
    <meta property="og:price:standard_amount" content="{{ product.compare_at_price | money_without_currency }}">
  {%- endif -%}

  {%- if product.variants.size > 0 -%}
    {%- for variant in product.variants limit: 5 -%}
      {%- unless variant.available -%}
        <meta property="og:availability" content="out of stock">
      {%- endunless -%}
    {%- endfor -%}
  {%- endif -%}
{%- endif -%}

{%- if template == 'index' -%}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ shop.name }}">
  <meta property="og:description" content="{{ shop.description | default: shop.name }}">
  {%- if settings.homepage_image -%}
    <meta property="og:image" content="{{ settings.homepage_image | image_url: width: 1200 }}">
  {%- endif -%}
{%- endif -%}

{%- if template == 'collection' -%}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ collection.title }}">
  <meta property="og:description" content="{{ collection.description | strip_html | truncate: 160 }}">
  {%- if collection.image -%}
    <meta property="og:image" content="{{ collection.image | image_url: width: 1200 }}">
  {%- endif -%}
{%- endif -%}

{%- if template == 'page' -%}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ page.title }}">
  <meta property="og:description" content="{{ page.content | strip_html | truncate: 160 }}">
{%- endif -%}

{%- if template == 'blog' or template == 'article' -%}
  {%- if template == 'article' -%}
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="{{ article.published_at | date: '%Y-%m-%dT%H:%M:%SZ' }}">
    <meta property="article:author" content="{{ article.author }}">
    <meta property="article:section" content="{{ blog.title }}">
    {%- if article.image -%}
      <meta property="og:image" content="{{ article.image | image_url: width: 1200 }}">
    {%- endif -%}
  {%- else -%}
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ blog.title }}">
  {%- endif -%}
{%- endif -%}

{%- comment -%}Twitter Card tags{%- endcomment -%}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@{{ shop.name | remove: ' ' | downcase }}">
{%- if template == 'product' -%}
  <meta name="twitter:label1" content="Price">
  <meta name="twitter:data1" content="{{ product.price | money }}">
  {%- if product.compare_at_price > product.price -%}
    <meta name="twitter:label2" content="Compare at price">
    <meta name="twitter:data2" content="{{ product.compare_at_price | money }}">
  {%- endif -%}
{%- endif -%}

{%- comment -%}Canonical URLs{%- endcomment -%}
{%- if canonical_url != blank -%}
  <link rel="canonical" href="{{ canonical_url }}">
{%- endif -%}

{%- comment -%}Alternative language links{%- endcomment -%}
{%- for locale in shop.published_locales -%}
  {%- if locale.iso_code != request.locale.iso_code -%}
    <link rel="alternate" hreflang="{{ locale.iso_code }}" href="{{ canonical_url | replace: request.locale.iso_code, locale.iso_code }}">
  {%- endif -%}
{%- endfor -%}